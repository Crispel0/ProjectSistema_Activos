{% extends 'partials/body.html' %}
{% block content %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>panel_admin</title>
    <style>
       @media screen and (min-width: 320px) and (max-width: 375px) {
            h2{
                font-size: 15px
            }
       }
       @media screen and (min-width: 376px) and (max-width: 425px) {
            h2{
                font-size: 20px
            }
       }
       @media screen and (min-width: 426px) and (max-width: 768px) {
            h2{
                font-size: 1.5rem
            }
       }
    </style>
</head>
<script src = "{% static 'js/chartt.js' %}"></script>

<body>
<div class="row">
    <div class="card-header col-12">
    </div>
    <div class="card-body d-flex flex-wrap col-sm-6 col-dm-5 col-lg-4">
        <h2 class="card-title text-center">Usuarios</h2>
        <canvas id="grafico_total" class="container"></canvas>
    </div>
    <div class="card-body d-flex flex-wrap col-sm-6 col-dm-5 col-lg-4">
        <h2 class="card-title text-center">Activos</h2>
        <canvas id="grafico_activos" class="container"></canvas>
    </div>
    <div class="card-body d-flex flex-wrap col-sm-6 col-dm-5 col-lg-4">
        <h2 class="card-title text-center">Software</h2>
        <canvas id="grafico_software" class="container"></canvas>
    </div>
    <div class="card-body d-flex flex-wrap col-sm-6 col-dm-5 col-lg-4">
        <h2 class="card-title text-center">Hardware</h2>
        <canvas id="grafico_hardware" class="container"></canvas>
    </div>
</div>
<script type="text/javascript">

var Json_data = {{ info_panel|safe }};

const usuarios = [];
const v_sistema_operativo = [];
const cantidad_software_hardware = [];

var ja = Nn; 
  const labels_activos = ["activos_totales","Activos","no_activos","is_staff"];
  const labels_usuarios = ["usuarios_totales","Activos","no_activos"];
  const labels_software = ["cantidad_total","activos","no_activos"];
  const labels_hardware_software = ["cantidad_total_activos_software","cantidad_total_activos_hardware"];

function pushDataToArray(data,array,label){
    for(var value in data){
        if (data.hasOwnProperty(value) && label.includes(value)){
            array.push(data[value])
            console.log(" array agregado " + data[value] + " a el array " + array)
        }
    }
}

cantidad_elementos = 0
for(var value in Json_data){
    while(cantidad_elementos <= Json_data[value]){
        if (Json_data.hasOwnProperty(value)){
            if(cantidad_elementos <= 3){
                pushDataToArray(Json_data,usuarios,labels_activos)
                cantidad_elementos += 1
            }
            else if(cantidad_elementos > 3 && cantidad_elementos <= 6){
                pushDataToArray(Json_data,v_sistema_operativo,labels_software)
                cantidad_elementos += 1
            }
            else {
                pushDataToArray(Json_data,cantidad_software_hardware,labels_hardware_software)
                cantidad_elementos += 1
            }
        }
    }
}
  

  
  
  var barColors = ["red","black","blue"];

  
  !(function () {
    const grafico_total = document.getElementById("grafico_total");
    new ja(grafico_total, {
      type: "doughnut",
      data: {
        labels: labels_activos,
        datasets: [
          {
            data: [2,4,6,8,10],
            borderWidth: 1,
            borderColor: "#36A2EB",
            backgroundColor: barColors,
          },
        ],
      },
      options: {
        responsive:true
      }
    });
    const grafico_usuarios = document.getElementById("grafico_usuarios");
    new ja(grafico_usuarios, {
      type: "line",
      data: {
        labels: labels_usuarios,
        datasets: [
          {
            label: "Usuarios Activos/Inactivos",
            data: usuarios,
            borderWidth: 1,
            fill: false,
            pointRadius:1,
            borderColor: "#36A2EB",
            backgroundColor: barColors,
          },
        ],
      },
      options: {
        responsive:true
      }
    });
    const grafico_activos = document.getElementById("grafico_activos");
    new ja(grafico_activos, {
      type: "bar",
      data: {
        labels: labels_activos,
        datasets: [
          {
            label: "Activos/Desactivos/Categorizacion",
            data: [20.30,40],
            pointRadius:1,
            borderColor: "#36A2EB",
            backgroundColor: barColors,
          },
        ],
      },
      options: {
        responsive:true
      }
    });
    const grafico_software = document.getElementById("grafico_software");
    new ja(grafico_software, {
      type: "radar",
      data: {
        labels: labels_software,
        datasets: [
          {
            label: "Activo/Desactivo/Categorizacion",
            data: [2,4,6,8,10],
            borderWidth: 1,
            borderColor: "#36A2EB",
            backgroundColor: barColors,
          },
        ],
      },
      options: {
        elements: {
          line: {
            borderWidth: 3
          }
        },
        responsive: true
      },
    });
    const grafico_hardware = document.getElementById("grafico_hardware");
    new ja(grafico_hardware, {
      type: "polarArea",
      data: {
        labels: labels_hardware_software,
        datasets: [
          {
            label: "Categorizacion",
            data: [2,4,6,8,10],
            borderWidth: 1,
            fill: false,
            pointRadius:1,
            borderColor: "#36A2EB",
            backgroundColor: barColors,
          },
        ],
      },
      options: {
        responsive:true
      }
    });
  })(); 
</script>
</body>
</html>
{% endblock %}